{"version":3,"sources":["src/app.js","src/card.js","src/data-service.js","src/environment.js","src/main.js","src/random.js","src/resources/index.js","C:/Users/Dave/Documents/GitHub/random-destiny-grimoire/src/app.html","C:/Users/Dave/Documents/GitHub/random-destiny-grimoire/src/card-detail.html","C:/Users/Dave/Documents/GitHub/random-destiny-grimoire/src/card.html","C:/Users/Dave/Documents/GitHub/random-destiny-grimoire/src/random.html"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n\n  configureRouter(config, router) {\n    config.map([{\n      route: ['', 'random'],\n      name: 'random',\n      moduleId: './random',\n      nav: true,\n      title: 'Random Grimoire'\n    }, {\n      route: 'card/:id',\n      name: 'card',\n      moduleId: './card',\n      nav: false,\n      title: 'Grimoire Card'\n    }]);\n\n    this.router = router;\n  }\n}\n","import { fetchGrimoire } from 'data-service';\n\nexport class CardView {\n\n  constructor() {\n    this.card = null;\n    this.cardName = '';\n    this.pageName = '';\n    this.themeName = '';  \n    this.color = 'footer-color-1';\n    this.shareHref = '';\n    this.encodedCardName = '';\n  }\n\n  activate(params) {\n    this.id = params.id;\n  }\n\n  attached() {\n\n    fetchGrimoire().then(themeData => {            \n\n      for (var i = 0; i < themeData.length; i++) {\n        var theme = themeData[i];\n\n        for (var j = 0; j < theme.pageCollection.length; j++) {\n          var page = theme.pageCollection[j];\n\n          for (var k = 0; k < page.cardCollection.length; k++) {\n            var card = page.cardCollection[k];\n\n            if (card.cardId == this.id) {\n              this.shareHref = encodeURIComponent(window.location.href);\n              this.encodedCardName = encodeURIComponent(card.cardName);\n              this.themeName = theme.themeName;\n              this.card = card;\n              this.cardName = card.cardName;\n              this.pageName = page.pageName;\n              document.getElementById('body').className = 'color-' + card\n                .rarity;  \n              this.color = 'footer-color-' + card.rarity;   \n              document.getElementById('grimoire-card').scrollIntoView();    \n              break;\n            }\n          }\n        }\n      }\n    });\n  }\n\n  get title() {\n    return `${this.cardName}`;\n  }\n\n  get categoryTitle() {\n    return `${this.themeName} :: ${this.pageName}`;\n  }\n}\n","import { HttpClient } from 'aurelia-fetch-client';\r\n\r\nexport function fetchGrimoire() {\r\n\r\n  if (localStorage.grimoireVersion && localStorage.grimoireVersion == \"7\" && localStorage.grimoire) {\r\n\r\n    return new Promise(function(resolve, reject) {\r\n      resolve(JSON.parse(localStorage.grimoire))\r\n    });\r\n  }\r\n\r\n  let client = new HttpClient();\r\n  return client\r\n      .fetch('data/grimoire.json')\r\n      .then(response => response.json())\r\n      .then(themeData => {\r\n        localStorage.setItem(\"grimoireVersion\", \"7\"); // 800454, 801011\r\n        localStorage.setItem(\"grimoire\", JSON.stringify(themeData.Response.themeCollection));\r\n        return themeData.Response.themeCollection;\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n};","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\n\nvar host = \"davetimmins.com\";\n\nif ((host == window.location.host) && (window.location.protocol != \"https:\")) {\n\n  window.location.protocol = \"https\";\n}\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import ProgressBar from 'progressbar.js';\nimport { fetchGrimoire } from 'data-service';\n\nexport class RandomCardView {\n\n  constructor() {\n    this.themes = null;\n    this.card = null;\n    this.cardName = '';\n    this.pageName = '';\n    this.themeName = '';    \n    this.bar = null;\n    this.color = 'footer-color-1';\n    this.shareHref = encodeURIComponent(window.location.href);\n    this.timerPlaying = true;\n  }\n\n  attached() {\n\n    if (localStorage.rdgTimerPlaying) {\n      this.timerPlaying = (localStorage.rdgTimerPlaying == \"true\");\n    }\n\n    fetchGrimoire().then(themeData => {\n        this.themes = themeData;\n        this.updateCard();\n      });\n  }\n\n  updateCard() {\n\n    document.getElementById('grimoire-card').scrollIntoView();\n    const theme = this.themes[Math.floor(Math.random() * this.themes.length)];\n    this.themeName = theme.themeName;\n    const page = theme.pageCollection[Math.floor(Math.random() * theme.pageCollection\n      .length)];\n    this.pageName = page.pageName;\n    this.card = page.cardCollection[Math.floor(Math.random() * page.cardCollection\n      .length)];\n    this.cardName = this.card.cardName;\n\n    document.getElementById('body').className = 'color-' + this.card.rarity;\n    this.color = 'footer-color-' + this.card.rarity;   \n\n    var introLength = this.card.cardIntro === undefined || this.card.cardIntro === null ? 0 : this.card.cardIntro.split(\" \").length;\n    var secs = Math.max(((this.card.cardDescription.split(\" \").length + introLength) / 200) *\n      60, 10);\n\n    if (this.bar !== null) {\n      this.bar.destroy();\n    }\n\n    var colorTo = '#2196F3';    \n    if (this.card.rarity === 2) {\n      colorTo = '#673AB7';\n    }\n    if (this.card.rarity === 3) {\n      colorTo = '#FF9800';\n    }\n\n    this.bar = new ProgressBar.Line(document.getElementById('progressBar'), {\n      duration: secs * 1000,\n      color: '#f44336',\n      trailColor: '#e9e9e9',\n      svgStyle: {\n        width: '100%',\n        height: '100%'\n      },\n      from: {\n        color: '#f44336'\n      },\n      to: {\n        color: colorTo\n      },\n      step: (state, bar) => {\n        bar.path.setAttribute('stroke', state.color);\n      }\n    });\n    this.bar.set(1.0);\n\n    var timerStop = document.querySelector(\"#timerStop\");\n    if (this.timerPlaying) {\n      timerStop.classList.add(\"hidden\");\n      const self = this;\n      this.bar.animate(0.0, {}, function() {\n        self.updateCard()\n      });\n    } else {\n      timerStop.classList.remove(\"hidden\");\n    }\n  }\n\n  toggleTimer() {\n\n    this.timerPlaying = !this.timerPlaying;\n    localStorage.setItem(\"rdgTimerPlaying\", this.timerPlaying);\n\n    var timerStop = document.querySelector(\"#timerStop\");\n    if (this.timerPlaying === true) {\n\n      timerStop.classList.add(\"hidden\");\n\n      if (this.bar !== null) {\n        const self = this;\n        this.bar.animate(0.0, {\n          duration: this.bar._opts.duration * this.bar.value()\n        }, function() {\n          self.updateCard();\n        });\n      }\n    } else {\n\n      timerStop.classList.remove(\"hidden\");\n\n      if (this.bar !== null) {\n        this.bar.stop();\n      }\n    }\n  }\n\n  detached() {\n    if (this.bar !== null) {\n      this.bar.destroy();\n    }\n  }\n\n  get title() {\n    return `${this.cardName}`;\n  }\n\n  get categoryTitle() {\n    return `${this.themeName} :: ${this.pageName}`;\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,null,null],"sourceRoot":"..\\src"}